language: objective-c
osx_image: xcode9.4.1
rvm:
- 2.5.1
cache:
  timeout: 86400 # 1 day
  directories:
  - /home/travis/cache/
  - /home/travis/.rvm/
before_install:
- chmod +x ./Scripts/auth.sh
- chmod +x ./Scripts/build_docs.sh
- chmod +x ./Scripts/build_package.sh
- chmod +x ./Scripts/deauth.sh
- chmod +x ./Scripts/install_pandoc.sh
- chmod +x ./Scripts/install_unity.sh
- chmod +x ./Scripts/test.sh
install:
- ./Scripts/install_unity.sh
script:
- make test
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ]; then make build; fi
deploy:
  provider: s3
  access_key_id: $ACCESS_KEY_ID
  secret_access_key: $ACCESS_KEY
  bucket: candycoded
  local-dir: build
  upload-dir: build
  skip_cleanup: true
  on:
    branch: master
